import { bench, describe } from 'vitest';
import { BasicTokenizer } from "../../src/BasicTokenizer";

function fnHex2Bin(hex: string) {
	return hex.split(",").map(function (s) {
		return String.fromCharCode(Number("0x" + s));
	}).join("");
}

const key = "L,12,00,64,00,01,C0,44,61,73,20,52,61,65,74,73,65,6C,00,1D,00,6E,00,01,C0,32,31,2E,35,2E,31,39,38,38,20,4B,6F,70,66,20,75,6D,20,4B,6F,70,66,00,46,00,78,00,01,C0,61,62,2A,63,3D,64,65,20,20,64,65,2B,66,67,3D,68,69,20,20,20,5B,64,61,62,65,69,20,73,69,6E,64,20,61,2D,69,20,76,65,72,73,63,68,69,65,64,65,6E,65,20,5A,69,66,66,65,72,6E,20,31,2D,39,21,21,5D,00,31,00,82,00,AD,20,0F,01,BF,22,50,6C,65,61,73,65,20,77,61,69,74,20,2E,2E,2E,20,20,28,20,63,61,2E,20,31,20,6D,69,6E,20,33,34,20,73,65,63,20,29,22,00,0C,00,8C,00,86,01,8E,20,61,2D,79,00,07,00,96,00,01,C0,00,0C,00,9B,00,0D,00,00,FA,EF,FF,46,00,45,00,A0,00,9E,20,0D,00,00,E1,EF,0F,20,EC,20,17,01,9E,20,0D,00,00,E2,EF,0F,20,EC,20,17,01,9E,20,0D,00,00,E3,EF,0F,20,EC,20,17,01,9E,20,0D,00,00,E6,EF,0F,20,EC,20,17,01,9E,20,0D,00,00,E7,EF,0F,20,EC,20,17,00,2F,00,AA,00,0D,00,00,64,E5,EF,28,0D,00,00,E1,F6,19,0A,F4,0D,00,00,E2,29,F6,0D,00,00,E3,01,A1,20,0D,00,00,64,E5,EE,19,63,20,EB,20,1E,40,01,00,30,00,B4,00,0D,00,00,68,E9,EF,0D,00,00,64,E5,F4,28,0D,00,00,E6,F6,19,0A,F4,0D,00,00,E7,29,01,A1,20,0D,00,00,68,E9,EE,19,63,20,EB,20,1E,40,01,00,48,00,BE,00,0D,00,00,E4,EF,FF,0C,28,0D,00,00,64,E5,F7,19,0A,29,01,0D,00,00,E5,EF,0D,00,00,64,E5,20,FB,20,19,0A,01,0D,00,00,E8,EF,FF,0C,28,0D,00,00,68,E9,F7,19,0A,29,01,0D,00,00,E9,EF,0D,00,00,68,E9,20,FB,20,19,0A,00,6A,00,C8,00,A1,20,0D,00,00,E1,EF,0D,00,00,E2,20,FC,20,0D,00,00,E1,EF,0D,00,00,E3,20,FC,20,0D,00,00,E1,EF,0D,00,00,E4,20,FC,20,0D,00,00,E1,EF,0D,00,00,E5,20,FC,20,0D,00,00,E1,EF,0D,00,00,E6,20,FC,20,0D,00,00,E1,EF,0D,00,00,E7,20,FC,20,0D,00,00,E1,EF,0D,00,00,E8,20,FC,20,0D,00,00,E1,EF,0D,00,00,E9,20,EB,20,1E,40,01,00,5E,00,D2,00,A1,20,0D,00,00,E2,EF,0D,00,00,E3,20,FC,20,0D,00,00,E2,EF,0D,00,00,E4,20,FC,20,0D,00,00,E2,EF,0D,00,00,E5,20,FC,20,0D,00,00,E2,EF,0D,00,00,E6,20,FC,20,0D,00,00,E2,EF,0D,00,00,E7,20,FC,20,0D,00,00,E2,EF,0D,00,00,E8,20,FC,20,0D,00,00,E2,EF,0D,00,00,E9,20,EB,20,1E,40,01,00,52,00,DC,00,A1,20,0D,00,00,E3,EF,0D,00,00,E4,20,FC,20,0D,00,00,E3,EF,0D,00,00,E5,20,FC,20,0D,00,00,E3,EF,0D,00,00,E6,20,FC,20,0D,00,00,E3,EF,0D,00,00,E7,20,FC,20,0D,00,00,E3,EF,0D,00,00,E8,20,FC,20,0D,00,00,E3,EF,0D,00,00,E9,20,EB,20,1E,40,01,00,46,00,E6,00,A1,20,0D,00,00,E4,EF,0D,00,00,E5,20,FC,20,0D,00,00,E4,EF,0D,00,00,E6,20,FC,20,0D,00,00,E4,EF,0D,00,00,E7,20,FC,20,0D,00,00,E4,EF,0D,00,00,E8,20,FC,20,0D,00,00,E4,EF,0D,00,00,E9,20,EB,20,1E,40,01,00,3A,00,F0,00,A1,20,0D,00,00,E5,EF,0D,00,00,E6,20,FC,20,0D,00,00,E5,EF,0D,00,00,E7,20,FC,20,0D,00,00,E5,EF,0D,00,00,E8,20,FC,20,0D,00,00,E5,EF,0D,00,00,E9,20,EB,20,1E,40,01,00,2E,00,FA,00,A1,20,0D,00,00,E6,EF,0D,00,00,E7,20,FC,20,0D,00,00,E6,EF,0D,00,00,E8,20,FC,20,0D,00,00,E6,EF,0D,00,00,E9,20,EB,20,1E,40,01,00,22,00,04,01,A1,20,0D,00,00,E7,EF,0D,00,00,E8,20,FC,20,0D,00,00,E7,EF,0D,00,00,E9,20,EB,20,1E,40,01,00,16,00,0E,01,A1,20,0D,00,00,E8,EF,0D,00,00,E9,20,EB,20,1E,40,01,00,13,00,18,01,A1,20,0D,00,00,E9,EF,0E,20,EB,20,1E,40,01,00,11,00,1D,01,0D,00,00,FA,EF,FF,46,F5,0D,00,00,FA,00,18,00,22,01,8A,01,BF,22,44,69,65,20,4C,6F,65,73,75,6E,67,3A,22,01,BF,00,43,00,2C,01,BF,20,0D,00,00,E1,F6,19,0A,F4,0D,00,00,E2,22,2A,22,0D,00,00,E3,22,3D,22,0D,00,00,64,E5,22,20,2F,20,22,0D,00,00,64,E5,22,2B,22,0D,00,00,E6,F6,19,0A,F4,0D,00,00,E7,22,3D,22,0D,00,00,68,E9,00,16,00,36,01,BF,20,0D,00,00,FA,2C,0D,00,00,FA,F7,1A,2C,01,01,CE,00,1F,00,40,01,B0,20,0D,00,00,E7,2C,0D,00,00,E6,2C,0D,00,00,E3,2C,0D,00,00,E2,2C,0D,00,00,E1,00,00,00";

const input = fnHex2Bin(key.substring(2)); // Skip "L,"
const basicTokenizer = new BasicTokenizer();

describe('BasicTokenizer Benchmark', () => {
  bench('decode PRG', () => {
    basicTokenizer.decode(input);
  }, { time: 1000 });
});
